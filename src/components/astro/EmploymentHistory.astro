---
import TimelineItem from '@/ui/TimelineItem.svelte';
import MotionWrapper from '@/motion/MotionWrapper.svelte';
import ContentBlock from '@/ui/ContentBlock.svelte';
import Heading from '@/ui/Heading.svelte';
import type {
	PastEmployerResponse,
} from '@/contentful/types';

const {
	pastEmployers,
} = Astro.props;
---

<style lang="postcss">
	@reference "@/styles/global.css";

	#experience {
		@apply from-muted/20 to-background bg-gradient-to-b py-12;

		> div {
			@apply container mx-auto max-w-4xl px-6 md:px-4;
		}
	}
</style>

<section
	id="experience"
>
	<div>
		<MotionWrapper client:only='svelte'>
			<Heading icon="💼" text="Employment History" client:only='svelte' />
		</MotionWrapper>
		<div class="mb-8">
			{pastEmployers.map(
				(
					{
						companyName, companyWebsiteUrl, companyLocation, companyGoogleMapsUrl, period, position, description,
					}:PastEmployerResponse, index: number,
				) => (
					<TimelineItem
						title={`👨‍💻 ${position}`}
						subtitle={companyName}
						subtitleHref={companyWebsiteUrl}
						location={companyLocation}
						locationHref={companyGoogleMapsUrl}
						date={`${period}`}
						isLast={index === pastEmployers.length - 1}
					{index}
					key={`${companyName}-${period}-${index}`}
					client:only='svelte'
					>
						<ContentBlock content={description} client:only='svelte' />
					</TimelineItem>
				),
			)}
		</div>
	</div>
</section>
